const { platform, arch } = process
const { execSync } = require('child_process')
const fs = require('fs')

console.log(`platform is ${platform}, arch is ${arch}`)

const existsNodeModules = fs.existsSync('./node_modules')
console.log('node_modules exist', existsNodeModules)

if (!existsNodeModules) {
  execSync('node scripts/electron_video_sdk_preinstall.js', {stdio: [0, 1, 2]})
  execSync('npm install', {stdio: [0, 1, 2]})
}